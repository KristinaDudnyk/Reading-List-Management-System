<!DOCTYPE html>
<html lang="en">
<head>
    <title>Books List</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Roboto:ital,wght@0,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/navbar.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/homepage.css" />
</head>
<body>
    <div id="page-container">
        <%- include('partials/navbar') %>
        <div id="content-wrap">
            <h1>Books</h1>
            <form method="get" action="/homepage" class="select-genre-container">
                <label for="genre">Filter by genre:</label>
                <select id="genre" name="genre"> 
                    <!-- make ir default  -->
                    <option value="all">All</option> 
                    <!-- make ir default  -->
                    <% if (allowedGenres) { %>
                        <% allowedGenres.forEach(g => { %>
                            <option value="<%= g.toLowerCase() %>" <%= selectedGenre === g.toLowerCase() ? 'selected' : '' %>><%= g %></option>
                        <% }) %>
                    <% } %>
                </select>
                <button type="submit" class="add-to-reading-list-btn">Filter</button>
            </form>
            <div class="books-container">
                <% books.map((element, index) => { %>
                <div class="book-item">
                        <a href="/book/<%= element.id %>"><img src="<%= element.cover %>" alt="<%= element.title %> cover" width="300px" height="400px"></a>                   
                    <div class="book-info">
                        
                            <a href="/book/<%= element.id %>">
                                <p class="book-title"><%= element.title %></p> 
                            </a>
                                <p class="book-author"><%= element.author %></p>
                           
                         
                 
                        <button onClick="addToReadingList('<%= element.id %>')" class="add-to-reading-list-btn" > Add to reading list </button>

                        </button>
                    </div>
                </div>
                <% }) %>
            </div>
        </div>
        <%- include('partials/footer') %>
    </div>   
    <script src="/js/addToReadingList.js"></script>
</body>
</html>